<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Perawatan Hewan - Pendataan Hewan PWA</title>

    <!-- PWA Meta Tags -->
    <link rel="manifest" href="../manifest.json" />
    <meta name="mobile-web-app-capable" content="yes" />`n    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="apple-mobile-web-app-title" content="Pendataan Hewan" />
    <meta name="theme-color" content="#4F46E5" />
    <meta name="description" content="Manajemen kesehatan dan perawatan hewan yang optimal" />

    <!-- CSS -->
    <link rel="stylesheet" href="../assets/css/style.css" />
  </head>
  <body>
    <div class="container">
      <!-- Header with Navigation -->
      <div class="header">
        <div class="header-content">
          <div class="header-title">
            <h1>🐾 Pendataan Hewan</h1>
            <p>Manajemen kesehatan dan perawatan hewan</p>
          </div>
          <div class="header-actions">
            <button class="btn-menu" onclick="toggleMobileMenu()">☰</button>
            <a href="profil.html" class="btn btn-info">👤 Profil</a>
            <a href="../index.html" class="btn btn-secondary">🏠 Home</a>
          </div>
        </div>
      </div>

      <!-- Main Navigation -->
      <nav class="main-nav">
        <div class="nav-container">
          <a href="dashboard.html" class="nav-link">📊 Dashboard</a>
          <a href="pendataan.html" class="nav-link">📝 Pendataan</a>
          <a href="perawatan.html" class="nav-link active">🏥 Perawatan</a>
          <a href="monitoring.html" class="nav-link">📈 Monitoring</a>
          <a href="panen.html" class="nav-link">🌾 Panen</a>
          <a href="evaluasi.html" class="nav-link">📋 Evaluasi</a>
          <a href="search.html" class="nav-link">🔍 Pencarian</a>
          <a href="list.html" class="nav-link">📄 Daftar</a>
          <a href="profil.html" class="nav-link">👤 Profil</a>
        </div>
      </nav>

      <!-- Mobile Navigation -->
      <nav class="mobile-nav" id="mobileNav">
        <div class="mobile-nav-content">
          <a href="dashboard.html" class="mobile-nav-link">📊 Dashboard</a>
          <a href="pendataan.html" class="mobile-nav-link">📝 Pendataan</a>
          <a href="perawatan.html" class="mobile-nav-link active">🏥 Perawatan</a>
          <a href="monitoring.html" class="mobile-nav-link">📈 Monitoring</a>
          <a href="panen.html" class="mobile-nav-link">🌾 Panen</a>
          <a href="evaluasi.html" class="mobile-nav-link">📋 Evaluasi</a>
          <a href="search.html" class="mobile-nav-link">🔍 Pencarian</a>
          <a href="list.html" class="mobile-nav-link">📄 Daftar</a>
          <a href="profil.html" class="mobile-nav-link">👤 Profil</a>
        </div>
      </nav>

      <!-- Main Content -->
      <main class="main-content">
        <div class="module-header">
          <h2>🏥 Perawatan Hewan</h2>
          <p>Manajemen kesehatan dan perawatan hewan yang optimal</p>
        </div>

        <div class="perawatan-tabs">
          <button class="sub-tab active" onclick="showSubTab('jadwal')">
            📅 Jadwal Perawatan
          </button>
          <button class="sub-tab" onclick="showSubTab('rekam-medis')">
            📋 Rekam Medis
          </button>
          <button class="sub-tab" onclick="showSubTab('layanan-medis')">
            👨‍⚕️ Layanan Medis
          </button>
        </div>

        <!-- Jadwal Perawatan Sub Tab -->
        <div id="jadwal" class="sub-content active">
          <div class="schedule-section">
            <div class="schedule-actions">
              <button class="btn btn-primary" onclick="showAddScheduleModal()">
                ➕ Tambah Jadwal Baru
              </button>
            </div>

            <!-- Calendar View -->
            <div class="calendar-container">
              <div class="calendar-header">
                <button onclick="previousMonth()" class="btn-small">◀</button>
                <h3 id="currentMonth">Oktober 2025</h3>
                <button onclick="nextMonth()" class="btn-small">▶</button>
              </div>
              <div id="calendarGrid" class="calendar-grid">
                <!-- Calendar will be generated by JavaScript -->
              </div>
            </div>

            <!-- Upcoming Schedules -->
            <div class="upcoming-schedules">
              <h3>⏰ Jadwal Mendatang (7 hari ke depan)</h3>
              <div id="upcomingList" class="schedule-list">
                <!-- Will be populated by JavaScript -->
              </div>
            </div>
          </div>
        </div>

        <!-- Rekam Medis Sub Tab -->
        <div id="rekam-medis" class="sub-content">
          <div class="medical-records">
            <div class="record-actions">
              <button class="btn btn-primary" onclick="showAddMedicalRecordModal()">
                ➕ Tambah Catatan Medis
              </button>
            </div>

            <div class="animal-selector">
              <label for="selectAnimalMedical">Pilih Hewan:</label>
              <select id="selectAnimalMedical" onchange="loadMedicalHistory()">
                <option value="">-- Pilih Hewan --</option>
                <!-- Will be populated by JavaScript -->
              </select>
            </div>

            <div id="medicalHistory" class="medical-history">
              <!-- Medical records will be displayed here -->
            </div>
          </div>
        </div>

        <!-- Layanan Medis Sub Tab -->
        <div id="layanan-medis" class="sub-content">
          <div class="medical-services">
            <div class="services-grid">
              <div class="service-card">
                <div class="service-icon">👨‍⚕️</div>
                <h3>Konsultasi Dokter Hewan</h3>
                <p>Konsultasi online atau booking janji temu</p>
                <button class="btn">📞 Hubungi Dokter</button>
              </div>

              <div class="service-card">
                <div class="service-icon">💊</div>
                <h3>Apotek Hewan</h3>
                <p>Pesan obat dan vitamin untuk hewan</p>
                <button class="btn">🛒 Buka Apotek</button>
              </div>

              <div class="service-card">
                <div class="service-icon">🚨</div>
                <h3>Emergency Call</h3>
                <p>Panggilan darurat untuk kondisi kritis</p>
                <button class="btn btn-danger">🚨 Emergency</button>
              </div>

              <div class="service-card">
                <div class="service-icon">🏥</div>
                <h3>Klinik Terdekat</h3>
                <p>Cari klinik hewan terdekat</p>
                <button class="btn">📍 Cari Klinik</button>
              </div>
            </div>

            <!-- Emergency Contacts -->
            <div class="emergency-contacts">
              <h3>📞 Kontak Darurat</h3>
              <div class="contact-list">
                <div class="contact-item">
                  <strong>Dr. Hewan Jakarta</strong>
                  <span>📞 021-12345678</span>
                </div>
                <div class="contact-item">
                  <strong>Klinik Hewan 24 Jam</strong>
                  <span>📞 0812-3456-7890</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </main>

      <!-- Footer -->
      <footer class="footer">
        <p>&copy; 2025 Pendataan Hewan PWA. All rights reserved.</p>
      </footer>
    </div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jsbarcode/3.11.5/JsBarcode.all.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="../assets/js/error-handler.js"></script>
    <script src="../assets/js/auth.js"></script>
    <script src="../assets/js/utils.js"></script>
    <script src="../assets/js/app.js"></script>
    <script>
      // Mobile menu toggle
      function toggleMobileMenu() {
        const mobileNav = document.getElementById('mobileNav');
        let overlay = document.getElementById('mobileOverlay');
        
        if (mobileNav) {
          const isActive = mobileNav.classList.contains('active');
          
          if (isActive) {
            // Close menu
            mobileNav.classList.remove('active');
            if (overlay) overlay.remove();
          } else {
            // Open menu
            mobileNav.classList.add('active');
            
            // Create overlay if it doesn't exist
            if (!overlay) {
              overlay = document.createElement('div');
              overlay.id = 'mobileOverlay';
              overlay.className = 'mobile-nav-overlay active';
              overlay.onclick = toggleMobileMenu;
              document.body.appendChild(overlay);
            }
          }
        }
      }

      // Close mobile menu when clicking outside
      document.addEventListener('click', function(event) {
        const mobileNav = document.getElementById('mobileNav');
        const menuBtn = document.querySelector('.btn-menu');
        
        if (mobileNav && menuBtn && !mobileNav.contains(event.target) && !menuBtn.contains(event.target)) {
          mobileNav.classList.remove('active');
        }
      });

      // Initialize when page loads
      document.addEventListener('DOMContentLoaded', function() {
        // Check authentication
        if (typeof auth !== 'undefined' && !auth.requireAuth()) {
          return; // Will redirect to login if not authenticated
        }
        
        showSubTab('jadwal');
        if (typeof loadCareSchedules === 'function') {
          loadCareSchedules();
        }
      });
    </script>
  </body>
</html>
